<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leitos</title>
    <link rel="stylesheet" href="disponibilidade.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> <!-- Adicionar Font Awesome -->
</head>
<body>
    
    <!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leitos </title>
    <link rel="stylesheet" href="disponibilidade.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> <!-- Adicionar Font Awesome -->
</head>
<body>
    
    <div class="container">
        <div class="header">
            <a href="gestao.html" class="voltar-seta"><i class="fas fa-arrow-left"></i> Voltar</a>
            <h1>Leitos</h1>
        </div>
        <div class="leitos-grid">
            <!-- Criando as caixas para os 16 leitos com link para cada leito -->
            <div class="leito-box" id="leito1">
                <a href="leito1.html" class="leito-link">
                    Leito 1
                </a>
                <select onchange="atualizarStatusLeito('Leito 1', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>

            <div class="leito-box" id="leito2">
                <a href="leito2.html" class="leito-link">
                    Leito 2
                </a>
                <select onchange="atualizarStatusLeito('Leito 2', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito3">
                <a href="leito3.html" class="leito-link">
                    Leito 3
                </a>
                <select onchange="atualizarStatusLeito('Leito 3', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito4">
                <a href="leito4.html" class="leito-link">
                    Leito 4
                </a>
                <select onchange="atualizarStatusLeito('Leito 4', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito5">
                <a href="leito5.html" class="leito-link">
                    Leito 5
                </a>
                <select onchange="atualizarStatusLeito('Leito 5', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito6">
                <a href="leito6.html" class="leito-link">
                    Leito 6
                </a>
                <select onchange="atualizarStatusLeito('Leito 6', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito7">
                <a href="leito7.html" class="leito-link">
                    Leito 7
                </a>
                <select onchange="atualizarStatusLeito('Leito 7', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito8">
                <a href="leito8.html" class="leito-link">
                    Leito 8
                </a>
                <select onchange="atualizarStatusLeito('Leito 8', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito9">
                <a href="leito9.html" class="leito-link">
                    Leito 9
                </a>
                <select onchange="atualizarStatusLeito('Leito 9', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito10">
                <a href="leito10.html" class="leito-link">
                    Leito 10
                </a>
                <select onchange="atualizarStatusLeito('Leito 10', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito11">
                <a href="leito11.html" class="leito-link">
                    Leito 11
                </a>
                <select onchange="atualizarStatusLeito('Leito 11', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito12">
                <a href="leito12.html" class="leito-link">
                    Leito 12
                </a>
                <select onchange="atualizarStatusLeito('Leito 12', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito13">
                <a href="leito13.html" class="leito-link">
                    Leito 13
                </a>
                <select onchange="atualizarStatusLeito('Leito 13', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito14">
                <a href="leito14.html" class="leito-link">
                    Leito 14
                </a>
                <select onchange="atualizarStatusLeito('Leito 14', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito15">
                <a href="leito15.html" class="leito-link">
                    Leito 15
                </a>
                <select onchange="atualizarStatusLeito('Leito 15', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>
            
            <div class="leito-box" id="leito16">
                <a href="leito16.html" class="leito-link">
                    Leito 16
                </a>
                <select onchange="atualizarStatusLeito('Leito 16', this.value)">
                    <option value="Disponível">Disponível</option>
                    <option value="Pendente">Pendente</option>
                    <option value="Ocupado">Ocupado</option>
                </select>
            </div>


    <script>
        // Função para atualizar o status do leito e salvar no localStorage
        function atualizarStatusLeito(leitoId, novoStatus) {
            let leitos = JSON.parse(localStorage.getItem("leitos")) || [];
            const leitoIndex = leitos.findIndex(leito => leito.id === leitoId);
    
            // Verifica se o leito existe e se o status atual é "Pendente" ou "Ocupado"
            if (leitoIndex !== -1 && (leitos[leitoIndex].status === "Pendente" || leitos[leitoIndex].status === "Ocupado")) {
                alert("O leito está ocupado ou pendente. Não é possível alterar o status.");
                return; // Retorna sem fazer alterações
            }
    
            // Se o leito não existir, ou se estiver disponível, atualiza o status
            if (leitoIndex !== -1) {
                leitos[leitoIndex].status = novoStatus;
            } else {
                leitos.push({ id: leitoId, status: novoStatus });
            }
            localStorage.setItem("leitos", JSON.stringify(leitos));
            atualizarCoresLeitos(); // Atualiza as cores após a mudança
        }
    
        // Função para atualizar as cores dos leitos com base no status
        function atualizarCoresLeitos() {
            let leitos = JSON.parse(localStorage.getItem("leitos")) || [];
            for (let i = 1; i <= 16; i++) {
                const leito = leitos.find(leito => leito.id === `Leito ${i}`);
                const leitoBox = document.querySelector(`#leito${i}`);
    
                if (leito && leitoBox) {
                    leitoBox.classList.remove('disponivel', 'pendente', 'ocupado');
                    if (leito.status === "Disponível") {
                        leitoBox.classList.add('disponivel');
                    } else if (leito.status === "Pendente") {
                        leitoBox.classList.add('pendente');
                    } else if (leito.status === "Ocupado") {
                        leitoBox.classList.add('ocupado');
                    }
                }
            }
        }
    
        // Chama a função para inicializar as cores dos leitos ao carregar a página
        window.onload = atualizarCoresLeitos;
    </script>
</body>
</html>
